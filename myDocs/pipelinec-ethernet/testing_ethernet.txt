05/02/25
git clone https://github.com/develone/pico2-ice.git -b test-dev
cd pico2-ice/PipelineC/pmod-ethernet/examples/pico-ice/ice_makefile_pipelinec/
devel@pi5-90:~/pico2-ice/PipelineC/pmod-ethernet/examples/pico-ice/ice_makefile_pipelinec $ ./build.sh 
rm -f lextab.py
rm -f yacctab.py
rm -f pll_clk_mhz.h
rm -f -r pipelinec_output
rm -f pipelinec.log
rm -f pll.v
rm -f *.json *.asc *.bin *.uf2
rm -f yosys_stderr.log
rm -f dfu_util.log
echo "#define PLL_CLK_MHZ 25.0\n" > pll_clk_mhz.h
/home/devel/PipelineC/src/pipelinec ethernet_top.c --top pipelinec_top --out_dir pipelinec_output --comb --no_synth > pipelinec.log
/home/devel/oss-cad-suite//bin/icepll -q -i 12 -o 25.0 -p -m -f pll.v
/home/devel/oss-cad-suite//bin/yosys -l simple.log -q -m ghdl -p "ghdl --std=08 -frelaxed `cat pipelinec_output/vhdl_files.txt` -e pipelinec_top; read_verilog -sv ethernet_top.sv pll.v; synth_ice40 -top ethernet_top -json gateware.json" 2> yosys_stderr.log
/home/devel/oss-cad-suite//bin/nextpnr-ice40 -l nextpnr.log -q --randomize-seed --up5k --package sg48 --pcf ice40.pcf --json gateware.json --asc gateware.asc --pre-pack eth_clocks.py
/home/devel/oss-cad-suite//bin/icepack gateware.asc gateware.bin
devel@pi5-90:~/pico2-ice/PipelineC/pmod-ethernet/examples/pico-ice/ice_makefile_pipelinec $ shasum gateware.bin 
6cf7b9373f64f5a9db51ee6f2be522da4249b95c  gateware.bin
devel@pi5-90:~/pico2-ice/PipelineC/pmod-ethernet/examples/pico-ice/ice_makefile_pipelinec $ cp gateware.bin ../../../test_mpremote/ethernet.bin
(env) devel@pi5-90:~/pico2-ice/PipelineC/pmod-ethernet/test_mpremote $ shasum ethernet-PipelineC.bin 
9534468fefe095e217911c0e1a988a5640f25f35  ethernet-PipelineC.bin
devel@pi5-90:~/pico2-ice/PipelineC/pmod-ethernet/test_mpremote $ . virtp.sh 
(env) devel@pi5-90:~/pico2-ice/PipelineC/pmod-ethernet/test_mpremote $ pip3 install mpremote
Looking in indexes: https://pypi.org/simple, https://www.piwheels.org/simple
Collecting mpremote
  Using cached mpremote-1.25.0-py3-none-any.whl (33 kB)
Collecting pyserial>=3.3
  Using cached https://www.piwheels.org/simple/pyserial/pyserial-3.5-py2.py3-none-any.whl (90 kB)
Installing collected packages: pyserial, mpremote
Successfully installed mpremote-1.25.0 pyserial-3.5
(env) devel@pi5-90:~/pico2-ice/PipelineC/pmod-ethernet/test_mpremote $ rm -f /media/devel/5221-0000/*.bin
(env) devel@pi5-90:~/pico2-ice/PipelineC/pmod-ethernet/test_mpremote $ cp ethernet-PipelineC.bin /media/devel/5221-0000/
(env) devel@pi5-90:~/pico2-ice/PipelineC/pmod-ethernet/test_mpremote $ mpremote run test_ethernet.py 
abc
pico2-ice starts blinking red
devel@pi5-90:~/pico2-ice/PipelineC/pmod-ethernet/examples/net $ sudo ./work_test 
CPU threads: 1
n 'work()'s: 1 
Total tx bytes: 8 
Total rx bytes: 4 
CPU took 0.000322 seconds to execute 
CPU iteration time: 0.000322 seconds
CPU bytes per sec: 37255.105848 B/s




